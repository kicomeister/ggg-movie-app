(this["webpackJsonpggg-movie-app"]=this["webpackJsonpggg-movie-app"]||[]).push([[0],{117:function(e,t,r){},118:function(e,t,r){},119:function(e,t,r){},120:function(e,t,r){},121:function(e,t,r){},122:function(e,t,r){},123:function(e,t,r){"use strict";r.r(t);var a=r(0),n=r.n(a),i=r(22),c=r.n(i),o=r(29),s=r(16),l=(r(60),r(54)),u=r(45),h=r.n(u),p=r(8),v=r(27),f=r(46),m=r.n(f),d=(r(69),function(e){var t=e.onChange,r=e.placeholder,a=e.value;return n.a.createElement("div",{className:"SearchInput"},n.a.createElement(v.Icon,{icon:m.a}),n.a.createElement("input",{placeholder:r,onChange:t,value:a}))}),b=function(e){var t=e.onChange,r=e.value,i=e.placeholder,c=Object(a.useCallback)((function(e){return t(e.target.value)}),[t]);return n.a.createElement(d,{onChange:c,value:r,placeholder:i})},g=r(47),y=r.n(g),O=r(48),E=r.n(O),j=r(28),S=r.n(j),_=(r(70),function(e){var t=e.movie,r=e.posterPath,a=e.isInWatchlist,i=e.onWatchlistClick;return n.a.createElement(o.b,{className:"MovieCard",to:"/movie/".concat(t.id)},n.a.createElement("div",{className:"MovieCard__buttons"},n.a.createElement("span",{onClick:i},n.a.createElement(v.Icon,{className:S()("MovieCard__icon",{"MovieCard__icon--selected":a}),icon:a?y.a:E.a}))),n.a.createElement("img",{className:"MovieCard__img",alt:t.title,src:r}),n.a.createElement("div",{className:"MovieCard__title"},t.title))}),w=r(2),k=r.n(w),M=r(5),x=r(6),A=function(){function e(){Object(M.a)(this,e)}return Object(x.a)(e,[{key:"configure",value:function(){var t,r;return k.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,k.a.awrap(fetch("".concat(e.BASE_URL,"/configuration?api_key=").concat(e.API_KEY)));case 3:return t=a.sent,a.next=6,k.a.awrap(t.json());case 6:if(r=a.sent,t.ok){a.next=9;break}throw Error(r.status_message);case 9:return a.abrupt("return",r);case 12:throw a.prev=12,a.t0=a.catch(0),console.error(a.t0),Error("Failed to fetch configuration");case 16:case"end":return a.stop()}}),null,null,[[0,12]])}},{key:"search",value:function(t){var r,a,n,i=arguments;return k.a.async((function(c){for(;;)switch(c.prev=c.next){case 0:return r=i.length>1&&void 0!==i[1]?i[1]:1,c.prev=1,c.next=4,k.a.awrap(fetch("".concat(e.BASE_URL,"/search/movie?api_key=").concat(e.API_KEY,"&query=").concat(t,"&page=").concat(r)));case 4:return a=c.sent,c.next=7,k.a.awrap(a.json());case 7:if(n=c.sent,a.ok){c.next=10;break}throw Error(n.status_message);case 10:return c.abrupt("return",n);case 13:throw c.prev=13,c.t0=c.catch(1),console.error(c.t0),Error("Failed to fetch search results");case 17:case"end":return c.stop()}}),null,null,[[1,13]])}},{key:"movie",value:function(t){var r,a;return k.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,k.a.awrap(fetch("".concat(e.BASE_URL,"/movie/").concat(t,"?api_key=").concat(e.API_KEY)));case 3:return r=n.sent,n.next=6,k.a.awrap(r.json());case 6:if(a=n.sent,r.ok){n.next=9;break}throw Error(a.status_message);case 9:return n.abrupt("return",a);case 12:throw n.prev=12,n.t0=n.catch(0),console.error(n.t0),Error("Failed to fetch movie");case 16:case"end":return n.stop()}}),null,null,[[0,12]])}},{key:"categories",value:function(){var t,r;return k.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,k.a.awrap(fetch("".concat(e.BASE_URL,"/genre/movie/list?api_key=").concat(e.API_KEY)));case 3:return t=a.sent,a.next=6,k.a.awrap(t.json());case 6:if(r=a.sent,t.ok){a.next=9;break}throw Error(r.status_message);case 9:return a.abrupt("return",r.genres);case 12:throw a.prev=12,a.t0=a.catch(0),console.error(a.t0),Error("Failed to fetch movie");case 16:case"end":return a.stop()}}),null,null,[[0,12]])}}]),e}();A.BASE_URL="https://api.themoviedb.org/3",A.API_KEY="7e056a23486674e5d068161da83e6a5d";var F,D,N,I,C,P,R,B,U,G,L,z,W,Y,K,Q,H=r(10),J=r(3),T=(r(20),r(1)),q=r(15),V=r(13),X=r(14),Z=(F=T.d.bound,D=T.d.bound,N=T.d.bound,I=function(){function e(t){Object(M.a)(this,e),this.rootStore=void 0,Object(H.a)(this,"isFetching",C,this),Object(H.a)(this,"error",P,this),Object(H.a)(this,"data",R,this),this.rootStore=t}return Object(x.a)(e,[{key:"startFetching",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.isFetching=!0,this.error=null,e&&(this.data=null)}},{key:"handleError",value:function(e){this.error=e,this.isFetching=!1}},{key:"handleSuccess",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];t&&(this.data=e),this.isFetching=!1,this.error=null}}]),e}(),C=Object(J.a)(I.prototype,"isFetching",[T.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),P=Object(J.a)(I.prototype,"error",[T.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),R=Object(J.a)(I.prototype,"data",[T.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Object(J.a)(I.prototype,"startFetching",[F],Object.getOwnPropertyDescriptor(I.prototype,"startFetching"),I.prototype),Object(J.a)(I.prototype,"handleError",[D],Object.getOwnPropertyDescriptor(I.prototype,"handleError"),I.prototype),Object(J.a)(I.prototype,"handleSuccess",[N],Object.getOwnPropertyDescriptor(I.prototype,"handleSuccess"),I.prototype),I),$=function(e){function t(e,r){var a;return Object(M.a)(this,t),(a=Object(q.a)(this,Object(V.a)(t).call(this,e))).apiService=void 0,a.apiService=r,a}return Object(X.a)(t,e),Object(x.a)(t,[{key:"configure",value:function(){var e;return k.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,k.a.awrap(this.apiService.configure());case 3:e=t.sent,this.handleSuccess(e),t.next=11;break;case 7:t.prev=7,t.t0=t.catch(0),console.log("AppStore.configure",{e:t.t0}),this.handleError(t.t0.message);case 11:case"end":return t.stop()}}),null,this,[[0,7]])}},{key:"getImageUrl",value:function(e){return this.data?"".concat(this.data.images.base_url,"original").concat(e):null}}]),t}(Z),ee=r(17),te=r(30),re=r(51),ae=r.n(re),ne=(B=function(e){function t(e,r){var a;return Object(M.a)(this,t),(a=Object(q.a)(this,Object(V.a)(t).call(this,e))).apiService=void 0,a.filterStore=void 0,Object(H.a)(a,"categories",U,Object(te.a)(a)),a.apiService=r,a.filterStore=e.filter,a}return Object(X.a)(t,e),Object(x.a)(t,[{key:"searchFor",value:function(e){var t;return k.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,this.startFetching(),r.next=4,k.a.awrap(this.apiService.search(e));case 4:t=r.sent,this.handleSuccess(t.results),r.next=12;break;case 8:r.prev=8,r.t0=r.catch(0),console.log("SearchStore.searchFor",{e:r.t0}),this.handleError(r.t0.message);case 12:case"end":return r.stop()}}),null,this,[[0,8]])}},{key:"filteredSearchResults",get:function(){var e=this;return this.filterStore.filters.length&&this.data?this.data.filter((function(t){return t.genre_ids&&t.genre_ids.filter((function(t){return e.filterStore.filters.includes(t)})).length})):this.data}},{key:"resultsGenreIds",get:function(){if(this.data){var e=this.data.reduce((function(e,t){return t.genre_ids?[].concat(Object(ee.a)(e),Object(ee.a)(t.genre_ids)):e}),[]);return ae()(e)}return[]}}]),t}(Z),U=Object(J.a)(B.prototype,"categories",[T.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),Object(J.a)(B.prototype,"filteredSearchResults",[T.e],Object.getOwnPropertyDescriptor(B.prototype,"filteredSearchResults"),B.prototype),Object(J.a)(B.prototype,"resultsGenreIds",[T.e],Object.getOwnPropertyDescriptor(B.prototype,"resultsGenreIds"),B.prototype),B),ie=(G=function(){function e(t){Object(M.a)(this,e),this.rootStore=void 0,Object(H.a)(this,"data",L,this),this.rootStore=t}return Object(x.a)(e,[{key:"addMovie",value:function(e){this.data=[].concat(Object(ee.a)(this.data),[e])}},{key:"removeMovie",value:function(e){var t=this.data.findIndex((function(t){return t.id===e.id}));t>=0&&this.data.splice(t,1)}},{key:"contains",value:function(e){return this.data.findIndex((function(t){return t.id===e.id}))>=0}},{key:"isEmpty",get:function(){return 0===this.data.length}}]),e}(),L=Object(J.a)(G.prototype,"data",[T.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Object(J.a)(G.prototype,"addMovie",[T.d],Object.getOwnPropertyDescriptor(G.prototype,"addMovie"),G.prototype),Object(J.a)(G.prototype,"removeMovie",[T.d],Object.getOwnPropertyDescriptor(G.prototype,"removeMovie"),G.prototype),Object(J.a)(G.prototype,"isEmpty",[T.e],Object.getOwnPropertyDescriptor(G.prototype,"isEmpty"),G.prototype),G),ce=function(e){function t(e,r){var a;return Object(M.a)(this,t),(a=Object(q.a)(this,Object(V.a)(t).call(this,e))).apiService=void 0,a.apiService=r,a}return Object(X.a)(t,e),Object(x.a)(t,[{key:"fetchMovie",value:function(e){var t;return k.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,this.startFetching(),r.next=4,k.a.awrap(this.apiService.movie(e));case 4:t=r.sent,this.handleSuccess(t),r.next=12;break;case 8:r.prev=8,r.t0=r.catch(0),console.log("SearchStore.searchFor",{e:r.t0}),this.handleError(r.t0.message);case 12:case"end":return r.stop()}}),null,this,[[0,8]])}}]),t}(Z),oe=r(31),se=r(52),le=function(e){function t(e,r){var a;return Object(M.a)(this,t),(a=Object(q.a)(this,Object(V.a)(t).call(this,e))).apiService=void 0,a.apiService=r,a}return Object(X.a)(t,e),Object(x.a)(t,[{key:"getGenres",value:function(){var e,t;return k.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,this.startFetching(),r.next=4,k.a.awrap(this.apiService.categories());case 4:e=r.sent,t=e.reduce((function(e,t){return Object(se.a)({},e,Object(oe.a)({},t.id,t.name))}),{}),this.handleSuccess(t),r.next=13;break;case 9:r.prev=9,r.t0=r.catch(0),console.log("SearchStore.getGenres",{e:r.t0}),this.handleError(r.t0.message);case 13:case"end":return r.stop()}}),null,this,[[0,9]])}}]),t}(Z),ue=(z=T.d.bound,W=function(){function e(t){Object(M.a)(this,e),this.rootStore=void 0,Object(H.a)(this,"filters",Y,this),this.rootStore=t}return Object(x.a)(e,[{key:"setFilter",value:function(e){this.filters.includes(e)?this.filters=this.filters.filter((function(t){return t!==e})):this.filters=[].concat(Object(ee.a)(this.filters),[e])}}]),e}(),Y=Object(J.a)(W.prototype,"filters",[T.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Object(J.a)(W.prototype,"setFilter",[z],Object.getOwnPropertyDescriptor(W.prototype,"setFilter"),W.prototype),W),he=(K=function(){function e(t){Object(M.a)(this,e),Object(H.a)(this,"appStore",Q,this),this.searchStore=void 0,this.myMoviesStore=void 0,this.movieStore=void 0,this.genresStore=void 0,this.filterStore=void 0,this.appStore=new $(this,t),this.myMoviesStore=new ie(this),this.movieStore=new ce(this,t),this.genresStore=new le(this,t),this.filterStore=new ue(this),this.searchStore=new ne(this,t)}return Object(x.a)(e,[{key:"app",get:function(){return this.appStore}},{key:"search",get:function(){return this.searchStore}},{key:"myMovies",get:function(){return this.myMoviesStore}},{key:"movie",get:function(){return this.movieStore}},{key:"genres",get:function(){return this.genresStore}},{key:"filter",get:function(){return this.filterStore}}]),e}(),Q=Object(J.a)(K.prototype,"appStore",[T.l],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),K),pe=n.a.createContext(null),ve=function(){var e=n.a.useContext(pe);if(!e)throw new Error("StoreProvider is missing");return e},fe=Object(p.a)((function(e){var t=e.movie,r=ve(),i=t.poster_path&&r.app.getImageUrl(t.poster_path)||"data:image/gif;base64,R0lGODlhAQABAIAAAAUEBAAAACwAAAAAAQABAAACAkQBADs=",c=r.myMovies.contains(t),o=Object(a.useCallback)((function(e){e.preventDefault(),r.myMovies.contains(t)?r.myMovies.removeMovie(t):r.myMovies.addMovie(t)}),[t,r.myMovies]);return n.a.createElement(_,{movie:t,posterPath:i,isInWatchlist:c,onWatchlistClick:o})})),me=(r(117),r(118),function(e){var t=e.children;return n.a.createElement("h2",{className:"Heading"},t)});function de(){return(de=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e}).apply(this,arguments)}function be(e,t){if(null==e)return{};var r,a,n=function(e,t){if(null==e)return{};var r,a,n={},i=Object.keys(e);for(a=0;a<i.length;a++)r=i[a],t.indexOf(r)>=0||(n[r]=e[r]);return n}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)r=i[a],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}var ge=n.a.createElement("path",{d:"M10 50A40 40 0 0 0 90 50A40 42.3 0 0 1 10 50",fill:"#ff5209",stroke:"none",transform:"rotate(230.178 50 51.15)"},n.a.createElement("animateTransform",{attributeName:"transform",type:"rotate",dur:"1s",repeatCount:"indefinite",keyTimes:"0;1",values:"0 50 51.15;360 50 51.15"})),ye=function(e){var t=e.svgRef,r=e.title,a=be(e,["svgRef","title"]);return n.a.createElement("svg",de({style:{margin:"auto",background:"none",display:"block",shapeRendering:"auto"},width:"100px",height:"100px",viewBox:"0 0 100 100",preserveAspectRatio:"xMidYMid",ref:t},a),r?n.a.createElement("title",null,r):null,ge)},Oe=n.a.forwardRef((function(e,t){return n.a.createElement(ye,de({svgRef:t},e))})),Ee=(r.p,function(){return n.a.createElement(Oe,null)}),je=(r(119),function(e){var t=e.onFilter,r=e.options,a=e.optionsIds,i=e.activeFilters;return n.a.createElement("div",{className:"Filter"},n.a.createElement("p",{className:"Filter__title"},"Filter: "),a.map((function(e){return n.a.createElement("button",{key:e,onClick:function(){return t(e)},className:S()("Filter__button",{"Filter__button--active":i.includes(e)})},r[e])})))}),Se=Object(p.a)((function(){var e=ve();return n.a.createElement(je,{onFilter:e.filter.setFilter,optionsIds:e.search.resultsGenreIds,activeFilters:e.filter.filters,options:e.genres.data||{}})})),_e=function(e){var t=e.onChange,r=e.value,a=e.isFetching,i=e.results;return n.a.createElement("div",{className:"Search"},n.a.createElement("div",{className:"Search__input-container"},n.a.createElement(b,{onChange:t,value:r,placeholder:"Search..."})),n.a.createElement("div",{className:"Search__results"},n.a.createElement("div",{className:"Search__container"},a||null!==i?n.a.createElement(me,null,"Search results"):null),n.a.createElement("div",{className:"Search__container"},null!==i&&n.a.createElement(Se,null)),a?n.a.createElement("div",null,n.a.createElement(Ee,null)):null,i?i.map((function(e){return n.a.createElement(fe,{key:e.id,movie:e})})):null))},we=Object(p.a)((function(){var e=ve(),t=Object(a.useState)(""),r=Object(l.a)(t,2),i=r[0],c=r[1],o=Object(a.useRef)(h()((function(t){return e.search.searchFor(t)}),500)).current,s=Object(a.useCallback)((function(e){c(e),o(e)}),[c,o]);return n.a.createElement(_e,{onChange:s,value:i,results:e.search.filteredSearchResults,isFetching:e.search.isFetching})})),ke=(r(120),function(e){var t=e.myMovies,r=e.isEmpty;return n.a.createElement("div",{className:"Watchlist"},n.a.createElement(me,null,"Watchlist"),n.a.createElement("div",{className:"Watchlist__results"},r?"You don't have any movies added to your watchlist.":t.map((function(e){return n.a.createElement(fe,{key:e.id,movie:e})}))))}),Me=Object(p.a)((function(){var e=ve();return n.a.createElement(ke,{myMovies:e.myMovies.data,isEmpty:e.myMovies.isEmpty})})),xe=function(){return n.a.createElement("div",{className:"Home"},n.a.createElement(we,null),n.a.createElement(Me,null))},Ae=r(53),Fe=(r(121),function(e){var t=e.movie,r=e.backgroundImageUrl,a=e.genre;return n.a.createElement("div",{className:"MovieDetails",style:{backgroundImage:r?"url(".concat(r,")"):void 0}},n.a.createElement("div",{className:"MovieDetails__overlay"},n.a.createElement("div",{className:"MovieDetails__details-container"},t?n.a.createElement(n.a.Fragment,null,n.a.createElement("h1",{className:"MovieDetails__title"},t.title),n.a.createElement("div",{className:"MovieDetails__meta"},n.a.createElement("span",{className:"MovieDetails__meta-item"},Object(Ae.formatDate)(new Date(t.release_date)))),n.a.createElement("div",{className:"MovieDetails__meta"},a&&n.a.createElement("div",{className:"MovieDetails__secondary MovieDetails__meta-item"},n.a.createElement("span",{className:"font-bold"},"Category: "),a.name),null!==t.runtime?n.a.createElement("div",{className:"MovieDetails__secondary MovieDetails__meta-item"},n.a.createElement("span",{className:"font-bold"},"Length: "),t.runtime," min."):null),n.a.createElement("p",null,t.overview)):null)))}),De=Object(p.a)((function(e){var t=e.movie,r=ve(),a=t.backdrop_path?r.app.getImageUrl(t.backdrop_path):null,i=Array.isArray(t.genres)&&t.genres.length?t.genres[0]:null;return n.a.createElement(Fe,{movie:t,backgroundImageUrl:a,genre:i})})),Ne=function(e){var t=e.movie;return e.isLoading?n.a.createElement(Ee,null):null===t?n.a.createElement("span",null,"error"):n.a.createElement(De,{movie:t})},Ie=Object(p.a)((function(e){var t=e.match,r=ve();return Object(a.useEffect)((function(){r.movie.fetchMovie(t.params.id)}),[t.params.id,r.movie]),n.a.createElement(Ne,{movie:r.movie.data,isLoading:r.movie.isFetching})})),Ce=function(){return n.a.createElement(o.a,null,n.a.createElement(s.c,null,n.a.createElement(s.a,{path:"/movie/:id",component:Ie}),n.a.createElement(s.a,{component:xe})))},Pe=r(7),Re=Object(Pe.c)((function(){var e=ve();return Object(a.useEffect)((function(){e.app.configure(),e.genres.getGenres()}),[e.app,e.genres]),n.a.createElement(Ce,null)}));r(122);c.a.render(n.a.createElement((function(e){var t=e.children,r=Object(p.b)((function(){return new he(new A)}));return n.a.createElement(pe.Provider,{value:r},t)}),null,n.a.createElement(Re,null)),document.getElementById("root"))},42:function(e,t,r){"use strict"},43:function(e,t){},44:function(e,t,r){"use strict";r.d(t,"a",(function(){return a}));var a=function(e){return e.toLocaleDateString("en-GB",{year:"numeric",month:"long",day:"numeric"})}},53:function(e,t,r){"use strict";r(42);var a=r(43);r.o(a,"formatDate")&&r.d(t,"formatDate",(function(){return a.formatDate}));var n=r(44);r.d(t,"formatDate",(function(){return n.a}))},55:function(e,t,r){e.exports=r(123)},60:function(e,t,r){},69:function(e,t,r){},70:function(e,t,r){}},[[55,1,2]]]);